<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="msapplication-tap-highlight" content="no" />
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
		<!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
		<!--<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />-->
		
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<title>Consulta a Base de Datos</title>
		<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
		<link rel="stylesheet" href="css/jquery.mobile.theme-1.4.5.min.css" />
		<link rel="stylesheet" href="css/jquery.mobile.struture-1.4.5.min.css" />
		<link rel="stylesheet" href="css/materialize.css" />
		<link rel="stylesheet" href="css/materialize.min.css" />


		<!--<script src="cordova.js"></script>-->
		<script type="text/javascript" src="cordova.js"></script>
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/jquery.mobile-1.4.5.min.js"></script>
		

		<script>
			function init(){
				//$.getJSON('http://localhost/respuesta.php', function(data){
				$.getJSON('http://localhost/phone/respuesta.php', function(data){
				console.log(JSON.stringify(data));
				var datos;
				
				var tr;
					for (var i = 0; i < data.length; i++){
						tr = $('<tr/>');
							tr.append("<th>" + data[i].id + "</th>");
							tr.append("<td>" + data[i].preg + "</td>");
							tr.append("<td>" + data[i].res1 + "</td>");
							tr.append("<td>" + data[i].res2 + "</td>");
							tr.append("<td>" + data[i].res3 + "</td>");
							tr.append("<td>" + data[i].resss + "</td>");


						$('#cuerpo-tabla').append(tr);
						
					}
				

					for (var i = 0; i < data.length; i++) { 						
							$("div#cosa").append("<p id='"+data[i].id+"''>"+ data[i].id+". "+ data[i].preg +"</p>");
							$("div#cosa").append("<label><input class='with-gap' type='radio' name='a"+data[i].id+"' id='a"+data[i].id+"' value='a'><span class='cyan-text text-darken-3'>"+ data[i].res1+"</span></label>");
							$("div#cosa").append("<label><input class='with-gap' type='radio' name='a"+data[i].id+"' id='b"+data[i].id+"' value='b'><span class='cyan-text text-darken-3'>"+ data[i].res2+"</span></label>");
							$("div#cosa").append("<label><input class='with-gap' type='radio' name='a"+data[i].id+"' id='c"+data[i].id+"' value='c'><span class='cyan-text text-darken-3'>"+ data[i].res3+"</span></label>");										
					}

  				$('#sig1').click(function(){
  				var cont= 0;
  				for (var x = 0; x<data.length; x++) { 
						var co= document.querySelector("input[name='a"+data[x].id+"']:checked").value;

						if(co==data[x].resss){cont++;  $("p#"+data[x].id).css({"color":"black"});}	
						else if($("input[name='a"+data[x].id).prop('checked', false)){
							$("p#"+data[x].id).css({"color":"red"});}
				}
				alert("Tu puntuacion es: " + cont);	
				//$("label#vid").replacewith("<label id='vid'>"+ vidas+"</label>");		
				});
							
				
				}

				);	

			}		
		</script>	
		
	</head>

<body onload="init();">
	

	<div data-role="page" id="principal">
		<div data-role="header" >
    		<h1 class="">Acceso a Base de Datos</h1>
		</div>
	
		<div role="main" class="ui-content yellow lighten-5" id="device">
		

<form action="">
<div id="cosa">
<!--<p display="right">Vidas: <label id="vid"></label></p>-->
</div></form>


						
		</div>
			
		<div data-role="footer" data-position="fixed">
			<div data-role="navbar" data-iconpos="bottom">
				<ul>
					<li><a href="#bar" id="sig1" data-icon="forward">Siguiente</a></li>
				</ul>
        	</div>
		</div>		
	
	
	</div>
</body>

</html>